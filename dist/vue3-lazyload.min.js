/*!
 * Vue3-Lazyload.js v0.1.1
 * A Vue3.x image lazyload plugin
 * (c) 2020 MuRong <admin@imuboy.cn>
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).VueLazyload=e()}(this,function(){"use strict";var t="undefined"!=typeof window&&null!==window,n=function(){if(t&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)return"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}}),!0;return!1}(),c=Object.prototype.propertyIsEnumerable,p=Object.getOwnPropertySymbols;function f(t){return"function"==typeof t||"[object Object]"===toString.call(t)}function l(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var r,n,i=0;for(("object"==typeof(r=t)?null===r:"function"!=typeof r)&&(t=e[i++]),t=t||{};i<e.length;i++)if(f(e[i])){for(var s=0,u=Object.keys(e[i]);s<u.length;s++){var a=u[s];"__proto__"!==(n=a)&&"constructor"!==n&&"prototype"!==n&&(f(t[a])&&f(e[i][a])?l(t[a],e[i][a]):t[a]=e[i][a])}!function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];if(!f(t))throw new TypeError("expected the first argument to be an object");if(0===e.length||"function"!=typeof Symbol||"function"!=typeof p)return;for(var r=0,n=e;r<n.length;r++)for(var i=n[r],s=0,u=p(i);s<u.length;s++){var a=u[s];c.call(i,a)&&(t[a]=i[a])}}(t,e[i])}return t}var e={rootMargin:"0px",threshold:0},i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",o=(r.prototype.config=function(t){void 0===t&&(t={}),l(this.options,t)},r.prototype.mount=function(t,e){this._image=t;var o=this._valueFormatter(e.value),r=o.src,e=o.loading,o=o.error;if(this._image.setAttribute("src",e||i),!n)throw this.loadImages(t,r,o),new Error("not support IntersectionObserver");this._initIntersectionObserver(t,r,o)},r.prototype.update=function(t){this._observer.unobserve(t),this._observer.observe(t)},r.prototype.unmount=function(t){this._observer.unobserve(t)},r.prototype.loadImages=function(t,e,o){this._setImageSrc(t,e,o)},r.prototype._setImageSrc=function(t,e,o){var r=t.getAttribute("srcset");"img"===t.tagName.toLowerCase()?(e&&t.setAttribute("src",e),r&&t.setAttribute("srcset",r),this._listenImageStatus(t,function(){},function(){t.setAttribute("src",o||"")})):t.style.backgroundImage="url('"+e+"')"},r.prototype._initIntersectionObserver=function(e,o,r){var n=this,t=this.options.observerOptions;this._observer=new IntersectionObserver(function(t){Array.prototype.forEach.call(t,function(t){t.isIntersecting&&(n._observer.unobserve(t.target),n._setImageSrc(e,o,r))})},t),this._observer.observe(this._image)},r.prototype._listenImageStatus=function(t,e,o){t.onload=function(){e()},t.onerror=function(){o()}},r.prototype._valueFormatter=function(t){var e=t,o=this.options.loading,r=this.options.error;return f(t)&&(e=t.src,o=t.loading||this.options.loading,r=t.error||this.options.error),{src:e,loading:o,error:r}},r);function r(t){this.options={loading:i,error:"",observerOptions:e},this.config(t)}return{install:function(t,e){e=new o(e);t.config.globalProperties.$Lazyload=e,t.provide("Lazyload",e),t.directive("lazy",{mounted:e.mount.bind(e),updated:e.update.bind(e),unmounted:e.unmount.bind(e)})}}});
